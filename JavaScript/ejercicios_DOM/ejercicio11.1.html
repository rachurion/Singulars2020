<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../ejercicios_DOM/DOM.css">
  <title>Exercici 11.1</title>
  <style>
  
  </style>
</head>
<body>
  <h2>Exercici 11.1</h2>
  <p>Calculadora super guai. Fes una calculadora amb botons i pantalla que tingui accions secundàries (shift) (+, -, x, /, =, C).</p>
  </br>
  <div class="calculatorFancy">
    <label for="screen"></label>
    <input class="screen" placeholder="0" type="text" id="screen" name="screen" readonly> 
    <div class="">
      <button id="seven">7</button>
      <button id="eight">8</button>
      <button id="nine">9</button>
      <button id="plus">+||^</button>
    </div>
    <div class="">
      <button id="four">4</button>
      <button id="five">5</button>
      <button id="six">6</button>
      <button id="minus">-||√</button>
    </div>
    <div class="">
      <button id="one">1</button>
      <button id="two">2</button>
      <button id="three">3</button>
      <button id="mult">x</button>
    </div>
    <div class="">
      <button id="C">C</button>
      <button id="zero">0</button>
      <button id="dot">.</button>
      <button id="divide">/</button>
    </div> 
    <div class="">
      <button id="shift">Shift</button>
      <button id="equal">=</button>
    </div>
  </div>
  <script src="./DOM.js"></script>
  <script>
    let screen = document.getElementById("screen");
    let value1, value2, operator;
    let shift = 0;
    var buttonOne = document.querySelector("#one");
    buttonOne.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(1, operator, value1, value2, screen); 
    });
    var buttonTwo = document.querySelector("#two");
    buttonTwo.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(2, operator, value1, value2, screen);
    } )
    var buttonThree = document.querySelector("#three");
    buttonThree.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(3, operator, value1, value2, screen);
    } )
    var buttonFour = document.querySelector("#four");
    buttonFour.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(4, operator, value1, value2, screen);
    } )
    var buttonFive = document.querySelector("#five");
    buttonFive.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(5, operator, value1, value2, screen);
    } )
    var buttonSix = document.querySelector("#six");
    buttonSix.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(6, operator, value1, value2, screen);
    } )
    var buttonSeven = document.querySelector("#seven");
    buttonSeven.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(7, operator, value1, value2, screen);
    } )
    var buttonEight = document.querySelector("#eight");
    buttonEight.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(8, operator, value1, value2, screen);
    } )
    var buttonNine = document.querySelector("#nine");
    buttonNine.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(9, operator, value1, value2, screen);
    } )
    var buttonZero = document.querySelector("#zero");
    buttonZero.addEventListener("click", () => {
      [value1, value2, screen.value] = calculatorButton(0, operator, value1, value2, screen);
      if (value2 == 0) console.log(value2);
    } )
    var buttonDot = document.querySelector("#dot");
    buttonDot.addEventListener("click", () => {
      if (!(screen.value.includes(".") || screen.value == "" || (screen.value.charAt(length + 1) == "+" || screen.value.charAt(length + 1) == "-" || screen.value.charAt(length + 1) == "/" || screen.value.charAt(length + 1) == "x" || screen.value.charAt(length + 1) == "^" || screen.value.charAt(length + 1) == "√"))) screen.value += ".";
      
    } )
    var buttonClear = document.querySelector("#C");
    buttonClear.addEventListener("click", () => {
      screen.value = null
      value1 = null;
      value2 = null;
      operator = null;;
    } )
    var buttonShift = document.querySelector("#shift");
    buttonShift.addEventListener("click", () => {
      console.log(shift);
      if (shift == 0) {
        shift = 1;
        buttonShift.style.backgroundColor = "red";
      } 
      else {
        shift = 0;
        buttonShift.style.backgroundColor = "";
      }
    } )
    var buttonPlus = document.querySelector("#plus");
    buttonPlus.addEventListener("click", () => {
      if (shift == 0)[operator, value1, value2, screen.value] = calculatorOperator(operator, "+", value1, value2, screen);
      else {
        [operator, value1, value2, screen.value] = calculatorOperator(operator, "^", value1, value2, screen);
        shift = 0;
        buttonShift.style.backgroundColor = "";
      }
    } )
    var buttonMinus = document.querySelector("#minus");
    buttonMinus.addEventListener("click", () => {
      if (shift == 0) [operator, value1, value2, screen.value] = calculatorOperator(operator, "-", value1, value2, screen);
      else {
        [operator, value1, value2, screen.value] = calculatorOperator(operator, "√", value1, value2, screen);
        shift = 0;
        buttonShift.style.backgroundColor = "";
      }
    } )
    var buttonMult = document.querySelector("#mult");
    buttonMult.addEventListener("click", () => {
      [operator, value1, value2, screen.value] = calculatorOperator(operator, "x", value1, value2, screen);
    } )
    var buttonDiv = document.querySelector("#divide");
    buttonDiv.addEventListener("click", () => {
      [operator, value1, value2, screen.value] = calculatorOperator(operator, "/", value1, value2, screen);
    } )
   
    var buttonEqual = document.querySelector("#equal");
    buttonEqual.addEventListener("click", () => {
      if (screen.value == "") {
        return;
      }
      else {
        if (screen.value.includes("+") || screen.value.includes("-") || screen.value.includes("/") || screen.value.includes("x") || screen.value.includes("^") || screen.value.includes("√")) return;
        else {
          if(value2 || value2 == 0){
            value2 = screen.value;
            if (operator == "x") screen.value = calculator(parseFloat(value1), "*", parseFloat(value2));
            else if (operator == "^") screen.value = calculator(parseFloat(value1), "**", parseFloat(value2));
            else if (operator == "√") screen.value = calculator(parseFloat(value1), "** -", parseFloat(value2));
            else screen.value = calculator(parseFloat(value1), operator, parseFloat(value2));
            value1 = screen.value;
            value2 = null;
          } 
          else return;
        }
      }
    } )

  </script>
</body>
</html>